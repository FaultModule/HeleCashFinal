<!DOCTYPE html>
<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Receitas - HeleCash</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen p-4">
  <nav class="bg-gray-800 text-white p-4 rounded-lg mb-4 flex justify-between items-center">
  <div class="text-xl font-bold">HeleCash</div>
  <div class="space-x-4">
    <a href="dashboard.html" class="hover:underline">Dashboard</a>
    <a href="receitas.html" class="hover:underline">Receitas</a>
    <a href="despesas.html" class="hover:underline">Despesas</a>
  </div>
</nav>
  <div class="max-w-5xl mx-auto bg-white rounded-xl shadow p-6">
    <div class="flex justify-between items-center mb-6">
      <h1 class="text-2xl font-bold text-green-700">ðŸ’¸ Receitas</h1>
      <button id="logout-btn" class="bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600">Sair</button>
    </div>

    <div class="overflow-x-auto">
      <table class="min-w-full text-sm text-left text-gray-700">
        <thead class="bg-green-100 text-green-800">
          <tr>
            <th class="px-4 py-2">DescriÃ§Ã£o</th>
            <th class="px-4 py-2">Categoria</th>
            <th class="px-4 py-2">Data</th>
            <th class="px-4 py-2">Valor</th>
          </tr>
        </thead>
        <tbody id="receitas-list" class="divide-y divide-gray-200">
          <!-- ConteÃºdo dinÃ¢mico -->
        </tbody>
      </table>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const token = localStorage.getItem('token');
      if (!token) {
        window.location.href = 'login.html';
        return;
      }

      document.getElementById('logout-btn').addEventListener('click', () => {
        localStorage.removeItem('token');
        window.location.href = 'login.html';
      });

      fetchreceitas(token);
    });

    async function fetchreceitas(token) {
      try {
        const response = await fetch('https://helecashfinal.onrender.com/api/lancamentos', {
          headers: { 'Authorization': `Bearer ${token}` }
        });

        const data = await response.json();
        const receitas = data.filter(l => l.categoria_tipo === 'receita');
        const list = document.getElementById('receitas-list');

        if (receitas.length === 0) {
          list.innerHTML = `<tr><td colspan="4" class="text-center text-gray-500 py-4">Nenhuma despesa registrada.</td></tr>`;
          return;
        }

        receitas.forEach(item => {
          const tr = document.createElement('tr');
          tr.innerHTML = `
            <td class="px-4 py-2">${item.descricao}</td>
            <td class="px-4 py-2">${item.categoria_nome}</td>
            <td class="px-4 py-2">${new Date(item.data).toLocaleDateString()}</td>
            <td class="px-4 py-2 text-green-600 font-semibold">R$ ${Number(item.valor).toFixed(2)}</td>
          `;
          list.appendChild(tr);
        });
      } catch (error) {
        console.error('Erro ao carregar despesas:', error);
      }
    }
  </script>
</body>
</html>

